import{A as e,j as a,b as l,q as t,c as s,w as o,J as u,o as c,a as d,H as n,K as r,Y as i,L as v,M as p,N as f,V as m,U as _,O as k,T as g,G as b,I as h,Q as y,P as V,W as w}from"./vue-vendor.DLq4fjsJ.js";import{s as C}from"./index-BF4KRMCJ.js";import{u as T}from"./piggy.DkTaJKTi.js";import{u as A,_ as D}from"./_plugin-vue_export-helper.CWDL7LE_.js";const j=D(e({__name:"create",setup(e){const{t:D}=A(),j=T(),{currentChainId:U}=C(j),x=a(!1),I=a(""),M=a(!1),S=a(""),O=l(()=>j.getAllTokens()),P=l(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]}),W=a(j.getDefaultToken());t(U,()=>{W.value=j.getDefaultToken()});const q=a({name:"",purpose:"",targetAmount:"",date:""}),B=l(()=>q.value.name&&q.value.targetAmount&&q.value.date&&W.value),F=e=>{q.value.date=e.detail.value},G=async()=>{if(I.value){M.value=!0,S.value="";try{const e=await j.lookupToken(I.value);e?(W.value=e,x.value=!1,I.value=""):S.value="Token not found or invalid address"}catch(e){S.value=e.message||"Failed to lookup token"}finally{M.value=!1}}},H=()=>i(),J=()=>{if(!B.value||!W.value)return;const e=Math.floor(new Date(q.value.date).getTime()/1e3);if(e<=Math.floor(Date.now()/1e3))w({title:D("create.invalid_date"),icon:"none"});else try{j.createPiggyBank(q.value.name,q.value.purpose,q.value.targetAmount,W.value,e),w({title:D("create.create_success"),icon:"success"}),setTimeout(()=>{i()},500)}catch(a){w({title:a.message||D("create.invalid_date"),icon:"none"})}};return(e,a)=>{const l=r,t=u,i=m,w=_,C=k;return c(),s(t,{class:"container"},{default:o(()=>[d(t,{class:"nav"},{default:o(()=>[d(l,{class:"back-btn",onClick:H},{default:o(()=>[v("â†")]),_:1}),d(l,{class:"page-title"},{default:o(()=>[v(p(f(D)("create.create_btn")),1)]),_:1})]),_:1}),d(t,{class:"form-container"},{default:o(()=>[d(t,{class:"form-group"},{default:o(()=>[d(l,{class:"label"},{default:o(()=>[v(p(f(D)("create.name_label")),1)]),_:1}),d(i,{class:"input-field",modelValue:q.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value.name=e),placeholder:f(D)("create.name_placeholder"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])]),_:1}),d(t,{class:"form-group"},{default:o(()=>[d(l,{class:"label"},{default:o(()=>[v(p(f(D)("create.purpose_label")),1)]),_:1}),d(i,{class:"input-field",modelValue:q.value.purpose,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value.purpose=e),placeholder:"What are you saving for?","placeholder-class":"placeholder"},null,8,["modelValue"])]),_:1}),d(t,{class:"form-group"},{default:o(()=>[d(l,{class:"label"},{default:o(()=>[v(p(f(D)("create.target_label")),1)]),_:1}),d(t,{class:"target-row"},{default:o(()=>[d(i,{class:"input-field target-input",type:"digit",modelValue:q.value.targetAmount,"onUpdate:modelValue":a[2]||(a[2]=e=>q.value.targetAmount=e),placeholder:"0.0","placeholder-class":"placeholder"},null,8,["modelValue"]),d(t,{class:"token-dropdown",onClick:a[3]||(a[3]=e=>x.value=!0)},{default:o(()=>[d(l,{class:"token-icon"},{default:o(()=>{var e;return[v(p((null==(e=W.value)?void 0:e.icon)||"ðŸª™"),1)]}),_:1}),d(l,{class:"token-symbol"},{default:o(()=>{var e;return[v(p((null==(e=W.value)?void 0:e.symbol)||"Select"),1)]}),_:1}),d(l,{class:"dropdown-arrow"},{default:o(()=>[v("â–¼")]),_:1})]),_:1})]),_:1})]),_:1}),d(t,{class:"form-group"},{default:o(()=>[d(l,{class:"label"},{default:o(()=>[v(p(f(D)("create.date_label")),1)]),_:1}),d(w,{mode:"date",start:P.value,value:q.value.date,onChange:F},{default:o(()=>[d(t,{class:"picker-view"},{default:o(()=>[v(p(q.value.date||f(D)("create.select_date")),1)]),_:1})]),_:1},8,["start","value"])]),_:1}),d(t,{class:"spacer"}),d(C,{class:"submit-btn",onClick:J,disabled:!B.value},{default:o(()=>[v(p(f(D)("create.create_btn")),1)]),_:1},8,["disabled"])]),_:1}),x.value?(c(),s(t,{key:0,class:"modal-overlay",onClick:a[6]||(a[6]=e=>x.value=!1)},{default:o(()=>[d(t,{class:"modal-content",onClick:a[5]||(a[5]=g(()=>{},["stop"]))},{default:o(()=>[d(l,{class:"modal-title"},{default:o(()=>[v(p(f(D)("create.select_token")),1)]),_:1}),d(t,{class:"custom-token-section"},{default:o(()=>[d(l,{class:"section-label"},{default:o(()=>[v(p(f(D)("create.custom_token")),1)]),_:1}),d(t,{class:"custom-input-row"},{default:o(()=>[d(i,{class:"address-input",modelValue:I.value,"onUpdate:modelValue":a[4]||(a[4]=e=>I.value=e),placeholder:"0x...","placeholder-class":"placeholder"},null,8,["modelValue"]),d(C,{class:"lookup-btn",onClick:G,disabled:M.value},{default:o(()=>[v(p(M.value?"...":"ðŸ”"),1)]),_:1},8,["disabled"])]),_:1}),S.value?(c(),s(l,{key:0,class:"lookup-error"},{default:o(()=>[v(p(S.value),1)]),_:1})):n("",!0)]),_:1}),d(l,{class:"section-label"},{default:o(()=>[v(p(f(D)("create.popular_tokens")),1)]),_:1}),d(t,{class:"token-list"},{default:o(()=>[(c(!0),b(h,null,y(O.value,e=>{var a;return c(),s(t,{key:e.address,class:V(["token-row",{active:(null==(a=W.value)?void 0:a.address)===e.address}]),onClick:a=>(e=>{W.value=e,x.value=!1})(e)},{default:o(()=>[d(l,{class:"token-icon-lg"},{default:o(()=>[v(p(e.icon),1)]),_:2},1024),d(t,{class:"token-info"},{default:o(()=>[d(l,{class:"token-name"},{default:o(()=>[v(p(e.name),1)]),_:2},1024),d(l,{class:"token-sym"},{default:o(()=>[v(p(e.symbol),1)]),_:2},1024)]),_:2},1024),e.isCustom?(c(),s(l,{key:0,class:"custom-badge"},{default:o(()=>[v("Custom")]),_:1})):n("",!0)]),_:2},1032,["class","onClick"])}),128))]),_:1})]),_:1})]),_:1})):n("",!0)]),_:1})}}}),[["__scopeId","data-v-acee3195"]]);export{j as default};
